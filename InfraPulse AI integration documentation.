# infrapulse-ai-integration-pack
Machine-readable integration, pricing, and verification specs for InfraPulse.ai

BEGIN FILE: README.md
# InfraPulse AI Integration Pack

Machine-readable integration, pricing, and verification specs for InfraPulse.ai.

This repository is the **canonical public integration surface** for autonomous agents and machine-to-machine clients.

## Live discovery endpoints (authoritative)
- Capabilities: https://infrapulse.ai/.well-known/capabilities
- Pricing: https://infrapulse.ai/.well-known/pricing
- Public Keys: https://infrapulse.ai/.well-known/keys
- OpenAPI: https://infrapulse.ai/openapi.json

## What this repo contains
- `well-known/` mirrors what InfraPulse serves under `/.well-known/*`
- `docs/` defines stable contracts (402 behavior, receipts)
- `examples/` shows copy/paste integration for agents

## Billing contract (non-negotiable)
- **Prepaid-only execution**
- If insufficient funds: **HTTP 402 Payment Required**
- Clients should fund using `funding_url` and retry with the same Idempotency-Key.
- Paid calls return a **signed receipt** verifiable via `/.well-known/keys`.

## Quickstart (Python)
See `examples/agent-python/README.md`

## Quickstart (Node)
See `examples/agent-node/README.md`
END FILE: README.md


BEGIN FILE: docs/README.md
# Docs

This folder defines stable client contracts for InfraPulse.ai.

Start here:
- `services.md` — catalog of what InfraPulse offers
- `402-payment-required.md` — deterministic funding + retry contract
- `receipts.schema.json` — signed receipt JSON schema
- `verify-example.md` — how to verify receipts
- `security.md` — security posture & disclosure guidance
END FILE: docs/README.md


BEGIN FILE: docs/services.md
# InfraPulse Services Catalog (Machine-Oriented)

This document is designed to be parseable by agents and procurement systems.

## Discovery (Free)
- `GET /.well-known/capabilities`
- `GET /.well-known/pricing`
- `GET /.well-known/keys`
- `GET /openapi.json`

## Paid Services (Prepaid Only)

### 1) Infrastructure Health Score
- Endpoint: `GET /v2/infra/health-score`
- Purpose: Numeric health score of infrastructure state
- Billing: prepaid
- Typical use: agent decides whether to deploy, route, or rollback

### 2) Infrastructure Verdict (Pass/Fail)
- Endpoint: `GET /v2/infra/verdict`
- Purpose: Deterministic pass/fail signal for automation
- Billing: prepaid
- Typical use: CI/CD gate; autopilot deployment gating

### 3) Failure Prediction
- Endpoint: `POST /predict/failure`
- Purpose: Predict outage / failure probability
- Billing: prepaid
- Typical use: preemptive mitigation actions

### 4) Architecture Analysis
- Endpoint: `POST /v2/architecture/analyze`
- Purpose: Analyze architecture risks, bottlenecks, cost traps
- Billing: prepaid
- Typical use: agent planning, refactor suggestions

### 5) Smart Routing
- Endpoint: `POST /v1/smart-route`
- Purpose: Route to best provider/model with policy + receipts
- Billing: prepaid
- Required headers: `Idempotency-Key`
- Typical use: meta-agent selecting LLM providers deterministically

## Required behaviors
- Deterministic failures: insufficient funds => HTTP 402
- Funding instruction returned in body: `funding_url`
- Retry safety: Idempotency-Key supported/required
- Receipts: paid calls return signed receipt payload
END FILE: docs/services.md


BEGIN FILE: docs/402-payment-required.md
# HTTP 402 Payment Required Contract (Deterministic Funding)

InfraPulse uses HTTP 402 to enforce **prepaid-only execution**.

## When 402 is returned
A paid endpoint MUST return 402 if:
- the caller has insufficient prepaid balance, OR
- the caller has no valid prepaid account

## Response shape (JSON)
Servers should return a JSON body with at least:

- `error` (string) — stable machine-readable error code
- `message` (string) — short human/machine readable
- `required_amount_cents` (integer) — minimum to proceed
- `currency` (string) — e.g. "USD"
- `funding_url` (string) — where to add funds
- `retry_with_idempotency_key` (boolean) — whether client must retry with same key
- `recommended_retry_after_seconds` (integer, optional)

### Example 402 response
```json
{
  "error": "insufficient_funds",
  "message": "Prepaid balance is insufficient for this request.",
  "required_amount_cents": 30,
  "currency": "USD",
  "funding_url": "https://infrapulse.ai/v1/fund",
  "retry_with_idempotency_key": true,
  "recommended_retry_after_seconds": 10
}
